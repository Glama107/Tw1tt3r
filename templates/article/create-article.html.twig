<style>
    .image-preview {
        position: relative;
    }

    .image-preview-img {
        border-radius: 20px;
        max-width: 150px;
    }

    .image-preview .delete-image {
        position: absolute;
        top: -0.5rem;
        left: 140px;
        width: 1.5rem;
        height: 1.5rem;
        border-radius: 50%;
        background-color: rgba(255, 255, 255, 0.8);
        display: flex;
        justify-content: center;
        align-items: center;
        cursor: pointer;
    }
</style>
<div class="border border-gray-200 dark:border-gray-600 rounded-lg p-4 my-4">
    {{ form_start(form) }}
    <div class="mb-4">
        <label class="block text-gray-700 font-bold mb-2 dark:text-gray-200" for="tweet_content">Say
            something funny</label>
        {{ form_widget(form.content) }}
    </div>
    <div class="mb-4">
        <label for="create_article_image" class="block text-gray-700 font-bold mb-2">
            <span class="sr-only">Choose file</span>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 17.68 17.71" width="17.68" height="17.71">
                <path d="M2.88 17.71L14.8 17.71C16.71 17.71 17.68 16.73 17.68 14.85L17.68 2.88C17.68 1 16.71 0.03 14.8 0.03L2.88 0.03C0.97 0.03 0 0.99 0 2.88L0 14.85C0 16.75 0.97 17.71 2.88 17.71ZM2.9 16.5C1.8 16.5 1.21 15.92 1.21 14.79L1.21 2.94C1.21 1.81 1.8 1.23 2.9 1.23L14.78 1.23C15.86 1.23 16.47 1.81 16.47 2.94L16.47 14.79C16.47 15.92 15.86 16.5 14.78 16.5ZM8.85 13.7C9.19 13.7 9.42 13.46 9.42 13.12L9.42 7.46L9.36 5.65L10.46 6.86L11.86 8.27C11.96 8.38 12.1 8.44 12.26 8.44C12.58 8.44 12.82 8.2 12.82 7.9C12.82 7.74 12.76 7.61 12.65 7.51L9.29 4.15C9.15 4.01 9.02 3.94 8.85 3.94C8.7 3.94 8.56 4.01 8.42 4.15L5.05 7.51C4.95 7.61 4.91 7.74 4.91 7.9C4.91 8.2 5.14 8.44 5.45 8.44C5.62 8.44 5.75 8.38 5.86 8.27L7.26 6.86L8.34 5.66L8.28 7.46L8.28 13.12C8.28 13.46 8.52 13.7 8.85 13.7Z"
                      fill="#fff"/>
            </svg>
        </label>
        {{ form_widget(form.image) }}
    </div>
    <div class="flex items-center">
        <button class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline"
                type="submit">Post
        </button>
    </div>
    {{ form_end(form) }}
</div>
<script>
    const input = document.getElementById('create_article_image');
    input.addEventListener('change', function (event) {
        const file = event.target.files[0];
        if (file) {
            const reader = new FileReader();
            reader.onload = function (e) {
                const image = document.createElement('img');
                image.src = e.target.result;
                image.classList.add('mt-4');
                image.classList.add('image-preview-img');
                const deleteBtn = document.createElement('button');
                deleteBtn.innerHTML = '&#10005;';
                deleteBtn.classList.add('delete-image');
                deleteBtn.addEventListener('click', function () {
                    image.parentNode.removeChild(image);
                    deleteBtn.parentNode.removeChild(deleteBtn);
                    input.value = '';
                });
                const container = document.createElement('div');
                container.classList.add('image-preview');
                container.appendChild(image);
                container.appendChild(deleteBtn);
                input.parentNode.insertBefore(container, input.nextSibling);
            }
            reader.readAsDataURL(file);
        }
    });
</script>